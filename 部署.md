### **一、极简部署方案（非容器化，更易维护）**
直接在阿里云ECS上部署服务（不使用Docker），减少容器化的学习和配置成本，适合个人使用场景：

#### 1. **操作系统选择**
推荐 **Ubuntu Server 22.04 LTS**：
- 包管理简单（`apt`命令），适合快速安装软件。
- 长期支持（LTS），减少系统升级频率，降低维护成本。


#### 2. **组件安装与配置**
##### （1）安装基础依赖
```bash
# 更新系统
sudo apt update && sudo apt upgrade -y

# 安装Java（Spring Boot运行环境）
sudo apt install -y openjdk-17-jdk

# 安装MariaDB
sudo apt install -y mariadb-server
sudo systemctl enable --now mariadb
sudo mysql_secure_installation  # 简单配置安全选项（设置root密码、删除匿名用户）

# 安装Valkey
sudo apt install -y valkey
sudo systemctl enable --now valkey
```

##### （2）初始化数据库
```bash
# 登录MariaDB
mysql -u root -p

# 执行初始化SQL（创建数据库、用户，导入表结构）
CREATE DATABASE accounting CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'account_user'@'localhost' IDENTIFIED BY '你的密码';
GRANT ALL PRIVILEGES ON accounting.* TO 'account_user'@'localhost';
FLUSH PRIVILEGES;
USE accounting;
-- 此处粘贴之前设计的10张表的CREATE TABLE语句
EXIT;
```

##### （3）部署后端服务
```bash
# 创建应用目录
mkdir -p /opt/accounting
cd /opt/accounting

# 上传Spring Boot打包的jar包（假设本地已开发完成，通过scp上传）
scp 本地路径/accounting.jar root@你的服务器IP:/opt/accounting/

# 创建启动脚本（简化启停）
cat > start.sh << 'EOF'
#!/bin/bash
nohup java -Xms512m -Xmx512m -jar accounting.jar --spring.profiles.active=prod > app.log 2>&1 &
echo "应用已启动，日志在app.log"
EOF

chmod +x start.sh

# 启动应用
./start.sh
```

##### （4）配置前端访问（可选）
如果有前端页面（如简单的Web界面），直接用Python临时起一个HTTP服务即可：
```bash
# 假设前端静态文件在/opt/accounting/frontend目录
cd /opt/accounting/frontend
python3 -m http.server 8000 --bind 0.0.0.0 &  # 后台运行，端口8000
```


### **二、资源占用优化（针对个人使用）**
由于只有你自己使用，资源需求极低，可进一步精简：
- **MariaDB**：默认配置即可（无需调优），个人使用数据量小，2核2GiB完全足够。
- **Valkey**：无需特殊配置，默认启动（内存占用约10-20MiB）。
- **后端服务**：JVM内存限制在512MiB（`-Xms512m -Xmx512m`），完全满足个人使用的接口调用频率。


### **三、数据备份方案（关键！）**
个人数据丢失影响大，需要简单可靠的备份策略：
```bash
# 创建备份脚本（每天凌晨2点备份数据库）
cat > /opt/accounting/backup.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/opt/accounting/backups"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
mkdir -p $BACKUP_DIR

# 备份MariaDB
mysqldump -u account_user -p'你的密码' accounting > $BACKUP_DIR/accounting_$TIMESTAMP.sql

# 保留最近30天的备份
find $BACKUP_DIR -name "accounting_*.sql" -type f -mtime +30 -delete
EOF

chmod +x /opt/accounting/backup.sh

# 添加到定时任务
crontab -e
# 加入以下行（每天凌晨2点执行）
0 2 * * * /opt/accounting/backup.sh
```


### **四、访问方式**
1. **后端接口**：直接通过服务器IP+端口访问（如`http://你的服务器IP:8080/api/records`）。
2. **前端页面**：如果启动了Python HTTP服务，访问`http://你的服务器IP:8000`。
3. **本地开发调试**：在Arch Linux开发环境中，直接连接阿里云的MariaDB和Valkey（需在阿里云安全组开放3306、6379端口，仅限你的IP访问）。


### **五、优势总结**
- **简单易维护**：非容器化部署，出问题时直接查看日志、重启服务即可，无需学习Docker命令。
- **资源利用率高**：2核2GiB服务器足够支撑个人使用（实际内存占用约1GiB以内）。
- **备份可靠**：定时脚本自动备份，避免数据丢失。